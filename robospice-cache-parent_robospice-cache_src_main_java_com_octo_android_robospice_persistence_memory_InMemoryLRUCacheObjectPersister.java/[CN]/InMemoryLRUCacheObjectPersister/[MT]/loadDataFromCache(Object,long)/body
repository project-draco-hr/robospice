{
  String keyString=cacheKey.toString();
  CacheItem<T> cacheItem=getMemoryCache().get(keyString);
  T dataToReturn=null;
  if (cacheItem != null) {
    boolean dataDoesExpire=maxTimeInCacheBeforeExpiry != DurationInMillis.ALWAYS;
    boolean dataIsStale=SystemClock.elapsedRealtime() - cacheItem.created > maxTimeInCacheBeforeExpiry;
    if (dataDoesExpire && dataIsStale) {
      String errorMsg=String.format(CACHE_MISS_EXPIRED,cacheKey);
      throw new CacheLoadingException(errorMsg);
    }
 else {
      dataToReturn=cacheItem.data;
    }
  }
 else   if (fallbackPersister != null) {
    dataToReturn=fallbackPersister.loadDataFromCache(cacheKey,maxTimeInCacheBeforeExpiry);
  }
  boolean dataIsMissing=dataToReturn == null;
  if (dataIsMissing) {
    String errorMsg=String.format(CACHE_MISS_NOT_FOUND,cacheKey);
    throw new CacheLoadingException(errorMsg);
  }
  return dataToReturn;
}
