{
  spiceManager.start(getInstrumentation().getTargetContext());
  SpiceRequestSucceedingStub<String> spiceRequestStub=new SpiceRequestSucceedingStub<String>(TEST_CLASS,TEST_RETURNED_DATA,WAIT_BEFORE_EXECUTING_REQUEST);
  SpiceRequestSucceedingStub<String> spiceRequestStub2=new SpiceRequestSucceedingStub<String>(TEST_CLASS,TEST_RETURNED_DATA,WAIT_BEFORE_EXECUTING_REQUEST);
  RequestListenerStub<String> requestListenerStub=new RequestListenerStub<String>();
  RequestListenerStub<String> requestListenerStub2=new RequestListenerStub<String>();
  spiceManager.execute(spiceRequestStub,TEST_CACHE_KEY,TEST_DURATION,requestListenerStub);
  spiceManager.execute(spiceRequestStub2,TEST_CACHE_KEY2,TEST_DURATION,requestListenerStub2);
  spiceRequestStub.awaitForLoadDataFromNetworkIsCalled(REQUEST_COMPLETION_TIME_OUT);
  spiceRequestStub2.awaitForLoadDataFromNetworkIsCalled(REQUEST_COMPLETION_TIME_OUT);
  spiceManager.shouldStop();
  requestListenerStub.await(REQUEST_COMPLETION_TIME_OUT);
  requestListenerStub2.await(REQUEST_COMPLETION_TIME_OUT);
  assertTrue(spiceRequestStub.isLoadDataFromNetworkCalled());
  assertTrue(spiceRequestStub2.isLoadDataFromNetworkCalled());
  assertNull(requestListenerStub.isSuccessful());
  assertNull(requestListenerStub2.isSuccessful());
}
