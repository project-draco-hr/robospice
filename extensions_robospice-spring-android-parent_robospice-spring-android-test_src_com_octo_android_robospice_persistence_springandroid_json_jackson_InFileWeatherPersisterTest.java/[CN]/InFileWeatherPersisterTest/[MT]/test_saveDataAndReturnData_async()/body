{
  WeatherResult weatherRequestStatus=buildWeather(TEST_TEMP,TEST_TEMP_UNIT);
  dataPersistenceManager.setAsyncSaveEnabled(true);
  WeatherResult weatherReturned=dataPersistenceManager.saveDataToCacheAndReturnData(weatherRequestStatus,"weather.json");
  ((JacksonObjectPersister<?>)dataPersistenceManager).awaitForSaveAsyncTermination(FIVE_HUNDRED,TimeUnit.MILLISECONDS);
  assertEquals(TEST_TEMP,weatherReturned.getWeather().getCurren_weather().get(0).getTemp());
}
