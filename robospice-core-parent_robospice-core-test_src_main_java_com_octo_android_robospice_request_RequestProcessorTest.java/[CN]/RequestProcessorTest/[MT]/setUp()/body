{
  super.setUp();
  System.setProperty("dexmaker.dexcache",getInstrumentation().getTargetContext().getCacheDir().getPath());
  getInstrumentation().waitForIdleSync();
  mockCacheManager=EasyMock.createMock(CacheManager.class);
  requestProcessorListener=new RequestProcessorListener(){
    @Override public void allRequestComplete(){
    }
    @Override public void requestsInProgress(){
    }
  }
;
  ExecutorService executorService=PriorityThreadPoolExecutor.getPriorityExecutor(1);
  networkStateChecker=new MockNetworkStateChecker();
  progressReporter=new DefaultRequestProgressReporter();
  requestProcessorUnderTest=new RequestProcessor(getInstrumentation().getTargetContext(),mockCacheManager,executorService,requestProcessorListener,networkStateChecker,progressReporter);
}
