{
  spiceManager.start(getInstrumentation().getTargetContext());
  SpiceRequestStub<String> contentRequestStub=new SpiceRequestFailingStub<String>(TEST_CLASS);
  RequestListenerWithProgressStub<String> requestListenerStub=new RequestListenerWithProgressStub<String>();
  spiceManager.addListenerIfPending(TEST_CLASS,TEST_CACHE_KEY,TEST_DURATION,requestListenerStub);
  contentRequestStub.awaitForLoadDataFromNetworkIsCalled(WAIT_BEFORE_EXECUTING_REQUEST + REQUEST_COMPLETION_TIME_OUT);
  assertNull(requestListenerStub.isSuccessful());
  assertFalse(requestListenerStub.isComplete());
  assertNull(requestListenerStub.getReceivedException());
}
